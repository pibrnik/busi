<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8" />
	<meta name="author" content="Žan Žnidar">
	<title>Busi</title>
	<meta name="description" content="Prikazovalnik lokacij avtobusov in njihovih zamud">

	<link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin="">
	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>
	    <script src="https://cdn.maptiler.com/maptiler-sdk-js/v1.2.0/maptiler-sdk.umd.js"></script>
    <!-- <link href="https://cdn.maptiler.com/maptiler-sdk-js/v1.2.0/maptiler-sdk.css" rel="stylesheet" /> -->
    <script src="https://cdn.maptiler.com/leaflet-maptilersdk/v2.0.0/leaflet-maptilersdk.js"></script>
   
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
   <!-- style.css -->
   <link rel="stylesheet" href="style.css" />
   
</head> 
 
 
<body> 
	 <div id="mapid" class="map"></div>
	 <div class="loader center no" id="loader"></div>
	
	<div class="info-container">
		<span class="material-symbols-outlined tool_icon" style="left: 50%; top:10px;" onclick="toggleVisibility()">info</span>
		<span class="material-symbols-outlined tool_icon" style="left: 50%; bottom:10px" onclick="mymap.flyTo(xy, 13);">my_location</span>

	</div>

	<div class="info-panel no" id="info">
		<div class ="center" style="width:75%">
			<h2>Busi</h2>
			<p>Prikazovalnik lokacije avtobusov in njihovih zamud.</p>
			<p>Avtorja: <br>
				Žan&nbsp;Žnidar <br>
				Marko&nbsp;Zupan<br> ©
				&nbsp;2023<br>
				<br>
				<br>
				Vir podatkov: <a href="https://ojpp.si/about" target="_blank">OJPP</a><br>
				Source code is available on <a href="https://github.com/zznidar/busi">GitHub</a></p>
		</div>
	</div>


	<div class = "tool_container">
		<div style="padding-top: 5px; padding-bottom: 5px;">
			<span class="material-symbols-outlined tool_icon" style="left: 37.5%;" onclick="window.location.reload();">sync</span>
			<span class= "tool_item" style="left:37.5%">Ozveži</span>

			<span class="material-symbols-outlined tool_icon" style="left: 12.5%;" onclick="toggleFavorite()">favorite</span>
			<span class= "tool_item" style="left:12.5%">Priljubljene</span>

			<span class="material-symbols-outlined tool_icon" style="left: 87.5%;">search</span>
			<span class= "tool_item" style="left:87.5%">Išči</span>

			<span class="material-symbols-outlined tool_icon" style="left: 62.5%;" onclick="godusModus()">directions_bus</span>
			<span class= "tool_item" style="left:62.5%">Vsi avtobusi</span>
		</div>
		
	</div>

	<div class = "site_container">
		<hr class="line">
		<div id="favorites" style="padding-left: 5px; padding-right: 5px; margin-top: 20px;" class="center no">
			
			<h2>Priljubljene relacije</h2>
			<p style="margin-top: -15px;">Novo relacijo dodaš z gumbom "Dodaj relacijo"</p>
			
			<div id="dodajanjePostajContainer">
			</div>

			<div id="gumbiZaRelacije" style ="margin-top: 25px;"><p></p></div><br>
			<span class="btn_general center" id="dodajPostajeBtn" onclick="dodajPostaje();">Dodaj relacijo</span>

		</div>
			<div style="padding-left: 5px; padding-right: 5px; margin-top: 50px;" class="center">
				<h2>Urnik za izbrano relacijo</h2>
				<div id="urnik">
					<p>Opomba: Urnik prikazuje tudi linije, ki niso več aktivne (npr. izpred 10 let). Preverite vozni red pri svojem prevozniku!</p>
					<!-- Timetable -->
					<table id="timetable">
						
					</table>
				</div>
			</div>
	 	
	<p id="log" style="display:none">Log: <br></p>
	<input type="checkbox" name="prikazujStareBuse" id="prikazujStareBuse" style="display: none;"><label for="prikazujStareBuse"></input></label>


<br>


<br>

		</div>


	</div>



	 
</body>


<script>
// Uporabne funkcije, src nekaterih: https://www.scirra.com/manual/126/system-expressions

/*lerp = function(a, b, x) {
	return(a + x * (b - a));
}*/
var lerp = (a, b, x) => (a + x * (b - a)); // Linear interpolation

var qarp = (a, b, c, x) => (lerp(lerp(a, b, x), lerp(b, c, x), x)); // Quadratic interpolation

var cubic = (a, b, c, d, x) => (lerp(qarp(a, b, c, x), qarp(b, c, d, x), x)); // Cubic interpolation
;
var cosp = (a, b, x) => ((a + b + (a - b) * Math.cos(x * Math.PI)) / 2); // Cosine interpolation

var plusminus = (p) => (Math.random() < p) ? -1 : 1; // Negate number or not (probability of negation)

var clamp = (x, a, b) => (x < a) ? a : (x > b) ? b : x; // Clamp number between a and b

function toggleVisibility() {
        var element = document.getElementById('info');
        element.classList.toggle('no');
    }

	function toggleFavorite() {
        var element = document.getElementById('favorites');
        element.classList.toggle('no');
    }
</script>


<script src="zemljevid.js"></script>
<script src="OJPP.js"></script>

</html>